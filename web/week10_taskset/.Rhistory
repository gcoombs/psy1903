# Generate dataset reproducibly
set.seed(1903)
subject_id <- 1:40
rt <- round(rnorm(40, mean = 520, sd = 120))
rt[sample(1:40, 2)] <- NA
congruent <- sample(c(TRUE, FALSE), 40, replace = TRUE)
condition <- sample(c("control", "incongruent"), 40, replace = TRUE)
experiment_data <- data.frame(subject_id, rt, congruent, condition)
# Save for reuse in later tasks
saveRDS(experiment_data, file = "data/raw/experiment_data.rds")
rm(list = ls())
experiment_data <- readRDS("../data/raw/experiment_data.rds")
experiment_data <- readRDS("data/raw/experiment_data.rds")
# Load the saved dataset
experiment_data <- readRDS("../data/raw/experiment_data.rds")
# Take a quick look at the first few rows
head(experiment_data)
# Check the structure of the dataset
str(experiment_data)
# Load the saved dataset
experiment_data <- readRDS("../data/raw/experiment_data.rds")
# Take a quick look at the first few rows
head(experiment_data)
# Check the structure of the dataset
str(experiment_data)
threshold <- 500  # global variable
flag_fast <- function(rt_vector) {
rt_vector < threshold  # BUG: uses global variable
}
flag_fast(experiment_data$rt)
rm(threshold)
flag_fast(experiment_data$rt)
subject_means <- tapply(experiment_data$rt,
experiment_data$condition,
mean)
print(paste("Mean for control:", subject_means["control"]))
print(paste("Mean for incongruent:", subject_means["incongruent"]))
traceback()
with(experiment_data, table(condition, is.na(rt)))
experiment_data$rt[experiment_data$rt > 500]
experiment_data$rt[experiment_data$rt < 500]
experiment_data$rt[3]
experiment_data[3]$rt
experiment_data[3,]$rt
experiment_data$rt[rt > 500]
experiment_data["rt">500,"rt", drop=FALSE]
condition <- factor(c("control", "control", "incongruent", "control", "incongruent", "control", "incongruent", "incongruent", "control", "incongruent"))
mean(experiment_data[experiment_data$congruent=TRUE, "rt", na.rm=TRUE]
mean(experiment_data[experiment_data$congruent==TRUE, "rt", na.rm=TRUE]
]
mean(experiment_data[experiment_data$congruent==TRUE, "rt"], na.rm=TRUE)
mean(experiment_data[experiment_data$congruent=TRUE, "rt"], na.rm=TRUE)
experiment_data$fast <- (experiment_data$rt < 500)
View(experiment_data)
new_subject <- c(subject_id = 11,congruent = TRUE,condition = "control",rt = 470, +                  rt_z = NA, fast = TRUE)
new_subject <- c(subject_id = 11,congruent = TRUE,condition = "control",rt = 470, rt_z = NA, fast = TRUE)
rbind(experiment_data, new_subject)
# Load the saved dataset
experiment_data <- readRDS("../data/raw/experiment_data.rds")
## Generate one or more random numbers between min and max (defaults: one number between 1â€“10)
getRandomNumber <- function(min = 1, max = 10, number = 1) {
sample(min:max, number)
}
## Classify reaction times into "Fast", "Slow", or "Unknown" (default threshold = 500ms)
classify_rt <- function(rt, threshold = 500) {
if (!is.numeric(threshold) || length(threshold) != 1) {
stop("Error: 'threshold' must be a single numeric value.")
}
if (!is.numeric(rt)) {
stop("Error: 'rt' must be numeric.")
}
category <- ifelse(
is.na(rt), "Unknown",
ifelse(rt < threshold, "Fast", "Slow")
)
return(category)
}
experiment_data$age <- NA
View(experiment_data)
for (i in 1:length(nrow(experiment_data$subject_id))) {
experiment_data[i, "age"] <- getRandomNumber(18, 65, 1)
}
length(nrow(experiment_data$subject_id)
)
length(nrow(experiment_data$age))
nrow(experiment_data$age)
nrows(experiment_data$age)
nrow(experiment_data$age)
nrow(experiment_data$rt)
nrow(experiment_data)
for (i in 1:nrow(experiment_data)) {
experiment_data[i, "age"] <- getRandomNumber(18, 65, 1)
}
head(experiment_data)
experiment_data$age <- sample(18:65, 1, replace = TRUE)
experiment_data$age <- sample(18:65, 1, replace = TRUE)
experiment_data$age <- sample(18:65, nrow(experiment_data), replace = TRUE)
classify_rt(experiment_data[1, "rt"]
)
classify_rt(experiment_data[2, "rt"])
classify_rt(experiment_data[3, "rt"])
experiment_data$rt_category_loop <- NA
for (i in 1:nrow(experiment_data)) {
experiment_data[i, "rt_category_loop"] <- classify_rt(experiment_data[i, "rt"])
}
experiment_data$rt_category_vec <- NA
experiment_data$rt_category_vec <- sapply(experiment_data$rt, classify_rt)
table(loop = experiment_data$rt_category_loop,
vec  = experiment_data$rt_category_vec,
useNA = "ifany")
flag_fast(experiment_data$rt)
flag_fast <- function(rt_vector) {
rt_vector < threshold
}
flag_fast(experiment_data$rt)
## Create Buggy Function
threshold <- 500
flag_fast <- function(rt_vector) {
rt_vector < threshold
}
flag_fast(experiment_data$rt)
rm(threshold)
flag_fast(experiment_data$rt)
flag_fast <- function(rt_vector, threshold = 500) {
rt_vector < threshold
}
flag_fast(experiment_data$rt)
# How many NAs overall?
sum(is.na(experiment_data$rt))
# How many NAs by condition?
tapply(is.na(experiment_data$rt), experiment_data$condition, sum)
# Optional: quick sanity checks
summary(experiment_data$rt)
with(experiment_data, table(condition, is.na(rt)))
subject_means <- tapply(experiment_data$rt,
)
subject_means <- tapply(experiment_data$rt,
experiment_data$condition,
function(mean, na.rm = TRUE))
subject_means <- tapply(experiment_data$rt,
experiment_data$condition,
mean, na.rm = TRUE)
print(paste("Mean for control:", subject_means["control"]))
print(paste("Mean for incongruent:", subject_means["incongruent"]))
write.csv(experiment_data, "../data/cleaned/experiment_data.csv", row.names = FALSE)
saveRDS(experiment_data, "../data/cleaned/experiment_data.rds")
save(experiment_data, subject_means, file = "data/cleaned/objects.RData")
save(experiment_data, subject_means, file = "../data/cleaned/objects.RData")
experiment_data$rt_category_vec2 <- classify_rt(experiment_data$rt)
setwd("/Users/yourusername/Desktop/psy1903/web/")
setwd("/Users/garthcoombs/Desktop/psy1903/web/")
dir.create("debug_example")
dir.create("debug_example/data")
dir.create("debug_example/data/raw")
dir.create("debug_example/data/cleaned")
dir.create("debug_example/scripts")
dir.create("debug_example/output")
dir.create("debug_example/output/plots")
dir.create("debug_example/output/tables")
dir.create("debug_example/reports")
View(experiment_data)
experiment_data[c(1,5,7,9),"condition"] <- NA
mean(experiment_data$rt, na.rm = TRUE)
mean(na.omit(experiment_data$rt))
subset <- na.omit(experiment_data)
View(subset)
mean(subset$rt)
subject_means <- tapply(experiment_data$rt,
experiment_data$condition,
mean, na.rm = TRUE)
subject_means
